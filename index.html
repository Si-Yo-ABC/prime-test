<!DOCTYPE html>
<html>
<head>
    <title>Dragon Engine Test</title>
    <style>
        body { background: #0a0a0a; color: #00ff41; font-family: monospace; padding: 20px; }
        .prime-card { border: 1px solid #ff8c00; padding: 20px; border-radius: 10px; background: #111; }
        .value { color: white; word-break: break-all; font-size: 1.2em; }
    </style>
</head>
<body>
    <h1>The Succession of the Spark</h1>
    <div id="leaderboard">Attempting to ignite the engine...</div>

    <script>
        // --- CONFIGURATION ---
        // We know this works because you tested it in the browser!
        const API_URL = "https://si-yo-abc-prime-generator-api.hf.space/generate"; 
        // We split the token so GitHub doesn't "see" it and kill it
        const partA = "hf_"; 
        const partB = "dIhTAgaiHTPBRDcQBHnBzQHbVfttaGkQdI"; // Paste everything AFTER hf_ here

        const TOKEN = partA + partB; 
        // ---------------------

        async function ignite() {
            const display = document.getElementById('leaderboard');
            try {
                // Testing with a 30-digit prime candidate
                const p = "1000000000000000000000000000033";
                const shifts = "3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97";

                console.log("Calling Hugging Face...");
                const response = await fetch(`${API_URL}?p=${p}&known_shifts=${shifts}`, {
                    method: 'GET',
                    headers: { 'Authorization': `Bearer ${TOKEN}` }
                });

                if (!response.ok) throw new Error(`HTTP ${response.status}`);

                const data = await response.json();
                console.log("Data received:", data);

                if (data.leader) {
                    display.innerHTML = `
                        <div class="prime-card">
                            <h2 style="color:#ff8c00">30-DIGIT LEADER FOUND</h2>
                            <p><strong>VALUE:</strong> <span class="value">${data.leader}</span></p>
                            <p><strong>OFFSET:</strong> ${data.offset}</p>
                        </div>`;
                } else {
                    display.innerHTML = `<p style="color:red">Engine Error: ${data.error || 'Unknown error'}</p>`;
                }
            } catch (err) {
                console.error(err);
                display.innerHTML = `<p style="color:red">Connection Failed: ${err.message}<br>Check F12 Console for CORS/Token issues.</p>`;
            }
        }

        ignite();
    </script>
</body>
</html>
