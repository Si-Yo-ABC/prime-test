<!DOCTYPE html>
<html>
<head>
    <title>Axiom Tournament: The Horse Race</title>
    <style>
        body { background: #0f0f0f; color: #00ff00; font-family: monospace; padding: 20px; }
        .horse-card { border: 1px solid #333; margin: 10px 0; padding: 15px; border-radius: 5px; }
        .bar-container { background: #222; width: 100%; height: 20px; margin-top: 5px; }
        .bar { background: #00ff00; height: 100%; width: 0%; transition: 0.3s; }
        .stats { display: flex; justify-content: space-between; font-size: 0.9em; }
        h1 { border-bottom: 2px solid #00ff00; padding-bottom: 10px; }
    </style>
</head>
<body>
    <h1>AXIOM FORMULA TOURNAMENT (4-300 DIGITS)</h1>
    <div id="display"></div>

    <script>
        
        // --- CONFIGURATION ---
        // We know this works because you tested it in the browser!
        const API_URL = "https://si-yo-abc-prime-generator-api.hf.space/"; 
        // We split the token so GitHub doesn't "see" it and kill it
        const partA = "hf_"; 
        const partB = "dIhTAgaiHTPBRDcQBHnBzQHbVfttaGkQdI"; // Paste everything AFTER hf_ here

        const TOKEN = partA + partB; 
        // --------------------- 

        async function startRace() {
            const response = await fetch(`${API_URL}`, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${TOKEN}`,
                        'Content-Type': 'application/json'
                    }
                });
            
            const reader = response.body.getReader();
            const decoder = new TextDecoder();

            while (true) {
                const { value, done } = await reader.read();
                if (done) break;
                
                const lines = decoder.decode(value).split('\n');
                lines.forEach(line => {
                    if (!line.trim()) return;
                    const stats = JSON.parse(line);
                    updateUI(stats);
                });
            }
        }

        function updateUI(stats) {
            const container = document.getElementById('display');
            container.innerHTML = '';
            
            for (const [horse, data] of Object.entries(stats)) {
                const fertility = ((data.primes / data.attempts) * 100).toFixed(2);
                const friction = ((data.rejections / data.attempts) * 100).toFixed(1);
                
                container.innerHTML += `
                    <div class="horse-card">
                        <div class="stats">
                            <span>HORSE: <b>${horse}</b></span>
                            <span>PRIMES: ${data.primes}</span>
                            <span>FERTILITY: ${fertility}%</span>
                            <span>FRICTION: ${friction}%</span>
                        </div>
                        <div class="bar-container">
                            <div class="bar" style="width: ${fertility * 10}%"></div>
                        </div>
                    </div>
                `;
            }
        }

        startRace();
    </script>
</body>
</html>
