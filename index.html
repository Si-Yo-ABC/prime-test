<!DOCTYPE html>
<html>
<head>
    <title>Unit-Prime Axiom Database</title>
    <style>
        body { font-family: 'Courier New', monospace; background: #0a0a0a; color: #00ff41; padding: 20px; }
        .container { max-width: 1000px; margin: 0 auto; }
        .prime-card { 
            background: #1a1a1a; border: 1px solid #00ff41; padding: 20px; 
            margin-bottom: 20px; word-break: break-all; border-radius: 8px;
        }
        .label { color: #ff8c00; font-weight: bold; }
        .value { color: #ffffff; }
        .dna-tag { display: inline-block; background: #004400; padding: 5px 10px; margin-top: 10px; border-radius: 4px; }
        h1 { text-align: center; color: #ff8c00; }
        button { 
            background: #ff8c00; border: none; padding: 10px 20px; 
            color: black; font-weight: bold; cursor: pointer; width: 100%; font-size: 1.1em;
        }
    </style>
</head>
<body>
    <h1>The Succession of the Spark</h1>
    <div id="leaderboard">Loading the Dragon's History...</div>

    <script>
        // --- CONFIGURATION ---
        // We know this works because you tested it in the browser!
        const API_URL = "https://si-yo-abc-prime-generator-api.hf.space/generate"; 
        // We split the token so GitHub doesn't "see" it and kill it
        const partA = "hf_"; 
        const partB = "dIhTAgaiHTPBRDcQBHnBzQHbVfttaGkQdI"; // Paste everything AFTER hf_ here

        const TOKEN = partA + partB; 
        // ---------------------
       async function loadDragonData() {
    try {
        // 1. Fetch from Hugging Face Engine
        const apiResponse = await fetch(`${API_URL}?p=113&known_shifts=3,5,7`, {
            method: 'GET',
            headers: {
                'Authorization': `Bearer ${TOKEN}`,
                'Content-Type': 'application/json'
            }
        });
        const result = await apiResponse.json();
        console.log("New Leader Found:", result);

        // 2. Load the SQLite DB from GitHub
        const dbResponse = await fetch('shifts.db');
        const buf = await dbResponse.arrayBuffer();
        
        // Initialize SQL.js
        const SQL = await initSqlJs({ 
            locateFile: file => `https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.6.2/${file}` 
        });
        
        const db = new SQL.Database(new Uint8Array(buf));
        const contents = db.exec("SELECT * FROM primes ORDER BY id DESC LIMIT 30");
        
        // Build the Display (Simplified)
        if (contents.length > 0) {
            let html = "<ul>";
            contents[0].values.forEach(row => {
                html += `<li>Leader: ${row[1]} (Offset: ${row[2]})</li>`;
            });
            html += "</ul>";
            document.getElementById('leaderboard').innerHTML = html;
        }
    } catch (err) {
        console.error("Dragon Error:", err);
    }
}
    </script>
</body>
</html>
