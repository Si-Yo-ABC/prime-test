<!DOCTYPE html>
<html>
<head>
    <title>Dragon Engine Test</title>
    <style>
        body { background: #0a0a0a; color: #00ff41; font-family: monospace; padding: 20px; }
        .prime-card { border: 1px solid #ff8c00; padding: 20px; border-radius: 10px; background: #111; }
        .value { color: white; word-break: break-all; font-size: 1.2em; }
    </style>
</head>
<body>
    <h1>The Succession of the Spark</h1>
    <div id="leaderboard">Attempting to ignite the engine...</div>

    <script>
        // --- CONFIGURATION ---
        // We know this works because you tested it in the browser!
        const API_URL = "https://si-yo-abc-prime-generator-api.hf.space/generate"; 
        // We split the token so GitHub doesn't "see" it and kill it
        const partA = "hf_"; 
        const partB = "dIhTAgaiHTPBRDcQBHnBzQHbVfttaGkQdI"; // Paste everything AFTER hf_ here

        const TOKEN = partA + partB; 
        // ---------------------

        async function ignite() {
    const display = document.getElementById('leaderboard');
    // STARTING FROM SCRATCH: Only 2 and 3
    const p = "3"; 
    const shifts = "2,3"; 

    try {
        const response = await fetch(`${API_URL}?p=${p}&known_shifts=${shifts}`, {
            method: 'GET',
            headers: { 'Authorization': `Bearer ${TOKEN}` }
        });
        const data = await response.json();

        if (data.leader) {
            const purityColor = data.pure_prime ? "#00ff41" : "#ff0000";
            const purityText = data.pure_prime ? "100% PURE PRIME" : "COMPOSITE DETECTED (FIX METHOD)";

            display.innerHTML = `
                <div class="prime-card" style="border-color: ${purityColor}">
                    <h2 style="color: ${purityColor}">${purityText}</h2>
                    <p><strong>LEADER:</strong> <span class="value">${data.leader}</span></p>
                    <hr>
                    <p><strong>LANDING GEAR SHIFTS:</strong> ${data.landings}</p>
                    <p><strong>HUNT TIME:</strong> ${data.time}s</p>
                </div>`;
        }
    } catch (err) {
        display.innerHTML = `<p style="color:red">Engine Stall: ${err.message}</p>`;
    }
}
    </script>
</body>
</html>
